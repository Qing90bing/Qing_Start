# JavaScript 文件夹文档

本文件夹包含了项目的所有 JavaScript 脚本。这些脚本共同负责网站的动态功能和用户交互。

## 文件结构

### 根目录文件

- `config.js`: 存储项目的核心配置。这包括搜索引擎列表、顺序、URL 和图标，以及主题（日间/夜间/自动模式）的配置。
- `dom.js`: 导出所有需要通过 JavaScript 操作的 DOM 元素的引用。通过将所有 DOM 查询集中在一个地方，可以方便地管理和访问页面元素。
- `main.js`: 项目的入口文件。它负责导入和初始化所有其他模块，设置事件监听器，并协调整个应用程序的启动流程。

### `modules/` 文件夹

`modules` 文件夹包含了实现特定功能的模块化代码。

- `background.js`: 管理页面的动态背景。它根据时间（白天/黑夜）从 Unsplash 或备用源获取图片，并实现了平滑的交叉淡入淡出过渡效果。
- `hitokoto.js`: 实现“一言”功能。它从 API 获取随机句子，并处理其显示和刷新逻辑，包括点击刷新和淡入淡出动画。
- `search.js`: 驱动搜索框的所有功能。它管理搜索引擎的切换、更新搜索框的占位符、动态生成引擎列表，并处理搜索表单的提交。
- `theme.js`: 控制网站的主题切换（日间、夜间、跟随系统）。它会根据用户选择或系统偏好来应用相应的 CSS 类，并动态生成主题选择菜单。
- `time.js`: 负责在页面上显示当前时间和日期。它会每秒更新一次时间，确保信息的准确性。
- `ui.js`: 处理全局 UI 交互，主要是指“点击外部关闭”功能。它通过设置一个全局点击监听器，来关闭任何打开的菜单（如主题选择或搜索引擎列表）。

## 工作流程

1. `main.js` 作为入口，首先被加载。
2. 它依次调用各个模块的 `init` 函数（`initTheme`, `initTime`, `initSearch` 等）。
3. 每个 `init` 函数负责其特定功能的初始化，例如：
    - 从 `localStorage` 读取用户偏好（如主题、搜索引擎）。
    - 动态生成 UI 元素（如菜单列表）。
    - 设置事件监听器（如点击、提交）。
4. `background.js` 在初始加载时获取背景图片，并在加载完成后隐藏预加载器。
5. `ui.js` 设置的全局监听器确保了流畅的用户体验，例如在用户点击页面空白处时可以自动关闭菜单。

通过这种模块化的结构，代码更易于理解、维护和扩展。
